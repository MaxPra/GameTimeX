<Window
    x:Class="GameTimeX.Properties"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="Properties"
    Width="560"
    Height="415"
    AllowsTransparency="True"
    Background="Transparent"
    FontFamily="{DynamicResource AppFontFamily}"
    FontSize="13"
    Loaded="Window_Loaded"
    MouseLeftButtonDown="Window_MouseLeftButtonDown"
    PreviewKeyDown="Window_PreviewKeyDown"
    Style="{StaticResource DefaultWindowStyle}"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None"
    mc:Ignorable="d">

    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="0"
            CornerRadius="0"
            GlassFrameThickness="0" />
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <sys:Double x:Key="FormControlHeight">32</sys:Double>
        <Thickness x:Key="FormRowSpacing">0,3,0,3</Thickness>

        <FontFamily x:Key="AppFontFamily">Segoe UI Variable Text, Segoe UI</FontFamily>

        <Color x:Key="AccentBlue">#289AFC</Color>
        <SolidColorBrush x:Key="AccentBlueBrush" Color="{StaticResource AccentBlue}" />

        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#F2FFFFFF" />
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#C8FFFFFF" />

        <SolidColorBrush x:Key="WindowStrokeBrush" Color="#22FFFFFF" />
        <SolidColorBrush x:Key="PanelStrokeBrush" Color="#1EFFFFFF" />

        <LinearGradientBrush x:Key="WindowBaseGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Offset="0" Color="#FF0B0D10" />
            <GradientStop Offset="0.55" Color="#FF0A0C10" />
            <GradientStop Offset="1" Color="#FF090A0E" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="WindowColorWashGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Offset="0" Color="#2218232B" />
            <GradientStop Offset="0.55" Color="#1A2B2A36" />
            <GradientStop Offset="1" Color="#26211B18" />
        </LinearGradientBrush>

        <RadialGradientBrush x:Key="WindowVignetteBrush" Center="0.52,0.50" GradientOrigin="0.52,0.50" RadiusX="0.85" RadiusY="0.85">
            <GradientStop Offset="0" Color="#00000000" />
            <GradientStop Offset="0.60" Color="#00000000" />
            <GradientStop Offset="1" Color="#CC000000" />
        </RadialGradientBrush>

        <RadialGradientBrush x:Key="WindowSoftHighlightBrush" Center="0.82,0.28" GradientOrigin="0.82,0.28" RadiusX="0.75" RadiusY="0.75">
            <GradientStop Offset="0" Color="#14289AFC" />
            <GradientStop Offset="0.35" Color="#0B289AFC" />
            <GradientStop Offset="1" Color="#00000000" />
        </RadialGradientBrush>

        <DrawingBrush
            x:Key="SoftNoiseBrush"
            Opacity="0.045"
            TileMode="Tile"
            Viewport="0,0,160,160"
            ViewportUnits="Absolute">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="#FFFFFFFF">
                        <GeometryDrawing.Geometry>
                            <GeometryGroup>
                                <RectangleGeometry Rect="12,18,1,1" />
                                <RectangleGeometry Rect="28,62,1,1" />
                                <RectangleGeometry Rect="64,20,1,1" />
                                <RectangleGeometry Rect="88,78,1,1" />
                                <RectangleGeometry Rect="104,44,1,1" />
                                <RectangleGeometry Rect="140,28,1,1" />
                                <RectangleGeometry Rect="18,132,1,1" />
                                <RectangleGeometry Rect="46,112,1,1" />
                                <RectangleGeometry Rect="118,120,1,1" />
                                <RectangleGeometry Rect="150,96,1,1" />
                            </GeometryGroup>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

        <DrawingBrush x:Key="WindowBackgroundBrush" Stretch="Fill">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="{StaticResource WindowBaseGradient}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>

                    <GeometryDrawing Brush="{StaticResource WindowColorWashGradient}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>

                    <GeometryDrawing Brush="{StaticResource WindowSoftHighlightBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>

                    <GeometryDrawing Brush="{StaticResource SoftNoiseBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>

                    <GeometryDrawing Brush="{StaticResource WindowVignetteBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

        <LinearGradientBrush x:Key="PanelBackgroundBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Offset="0" Color="#900F1218" />
            <GradientStop Offset="1" Color="#700B0D12" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="PanelInnerSheenBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Offset="0" Color="#10FFFFFF" />
            <GradientStop Offset="0.35" Color="#06000000" />
            <GradientStop Offset="1" Color="#00000000" />
        </LinearGradientBrush>

        <Style x:Key="PaneFrameStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Background" Value="{StaticResource PanelBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{StaticResource PanelStrokeBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
        </Style>

        <Style x:Key="LinkedBarStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="BorderBrush" Value="#1EFFFFFF" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Offset="0" Color="#30289AFC" />
                        <GradientStop Offset="0.45" Color="#16000000" />
                        <GradientStop Offset="1" Color="#12000000" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="UnlinkButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="24" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Margin" Value="8,0,0,0" />
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            x:Name="bg"
                            Background="{TemplateBinding Background}"
                            BorderBrush="#1EFFFFFF"
                            BorderThickness="1"
                            CornerRadius="6"
                            SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Background" Value="#22FF3B30" />
                                <Setter TargetName="bg" Property="BorderBrush" Value="#44FF3B30" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bg" Property="Background" Value="#33FF3B30" />
                                <Setter TargetName="bg" Property="BorderBrush" Value="#66FF3B30" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style
            x:Key="IconOnlyButton"
            BasedOn="{StaticResource NormalGuiButton}"
            TargetType="Button">
            <Setter Property="Width" Value="56" />
            <Setter Property="Height" Value="{StaticResource FormControlHeight}" />
            <Setter Property="Margin" Value="{StaticResource FormRowSpacing}" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style
            x:Key="FormTextBox_Local"
            BasedOn="{StaticResource FormTextBox}"
            TargetType="TextBox">
            <Setter Property="Height" Value="{StaticResource FormControlHeight}" />
            <Setter Property="Margin" Value="{StaticResource FormRowSpacing}" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
    </Window.Resources>

    <Grid SnapsToDevicePixels="True">
        <Rectangle
            Margin="6"
            Fill="#00000000"
            IsHitTestVisible="False"
            RadiusX="12"
            RadiusY="12">
            <Rectangle.Effect>
                <DropShadowEffect
                    BlurRadius="22"
                    ShadowDepth="0"
                    Color="#AA000000" />
            </Rectangle.Effect>
        </Rectangle>

        <Border
            Margin="6"
            Padding="0"
            Background="{StaticResource WindowBackgroundBrush}"
            BorderBrush="{StaticResource WindowStrokeBrush}"
            BorderThickness="1"
            ClipToBounds="True"
            CornerRadius="12"
            SnapsToDevicePixels="True">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="28" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Border
                    Grid.Row="0"
                    ClipToBounds="True"
                    CornerRadius="12,12,0,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Offset="0" Color="#CC0A0C10" />
                            <GradientStop Offset="1" Color="#7A0A0C10" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>

                <Border
                    Grid.Row="0"
                    BorderBrush="#18FFFFFF"
                    BorderThickness="0,0,0,1"
                    CornerRadius="12,12,0,0" />

                <TextBlock
                    Grid.Row="0"
                    Margin="12,0,0,0"
                    VerticalAlignment="Center"
                    FontFamily="{DynamicResource AppFontFamily}"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource TextPrimaryBrush}"
                    Text="Properties" />

                <StackPanel
                    Grid.Row="0"
                    HorizontalAlignment="Right"
                    Orientation="Horizontal">
                    <Button
                        x:Name="btnClose"
                        Width="40"
                        Height="28"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Click="btnClose_Click"
                        Content="X"
                        Foreground="White"
                        Style="{StaticResource NoMouseOverButtonStyle}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="bg"
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="0,12,0,0"
                                    SnapsToDevicePixels="True">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bg" Property="Background" Value="#CCFF3B30" />
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="bg" Property="Background" Value="#AAFF3B30" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>

                <Grid
                    x:Name="grdContent"
                    Grid.Row="1"
                    Margin="18">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="12" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Border
                        x:Name="bSteamProfileLinked"
                        Grid.Row="0"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Margin="0,0,0,8"
                        Style="{StaticResource LinkedBarStyle}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                Orientation="Horizontal">
                                <TextBlock
                                    Margin="0,0,8,0"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource AccentBlueBrush}"
                                    Text="✔" />
                                <TextBlock
                                    VerticalAlignment="Center"
                                    Foreground="{StaticResource TextPrimaryBrush}"
                                    Text="Steam profile linked" />
                            </StackPanel>

                            <Button
                                x:Name="btnUnlinkSteamProfile"
                                Grid.Column="1"
                                Click="btnUnlinkSteamProfile_Click"
                                Content="✖"
                                Style="{StaticResource UnlinkButtonStyle}" />
                        </Grid>
                    </Border>

                    <TextBox
                        x:Name="txtProfileName"
                        Grid.Row="1"
                        Grid.Column="0"
                        Style="{StaticResource FormTextBox_Local}"
                        Tag="Profile name" />

                    <Button
                        x:Name="btnImportFromSteam"
                        Grid.Row="1"
                        Grid.Column="2"
                        Click="btnImportFromSteam_Click"
                        Style="{StaticResource IconOnlyButton}"
                        ToolTip="Import game from steam">
                        <Image
                            Width="30"
                            Height="30"
                            Source="{StaticResource steamImportImage}"
                            Stretch="Uniform" />
                    </Button>

                    <TextBox
                        x:Name="txtPicPath"
                        Grid.Row="2"
                        Grid.Column="0"
                        IsReadOnly="True"
                        Style="{StaticResource FormTextBox_Local}"
                        Tag="Picture path" />

                    <Button
                        x:Name="btnShowFileDialog"
                        Grid.Row="2"
                        Grid.Column="2"
                        Click="btnShowFileDialog_Click"
                        Style="{StaticResource IconOnlyButton}"
                        ToolTip="Choose pic">
                        <Image
                            Width="18"
                            Height="18"
                            Source="{StaticResource picture}"
                            Stretch="Uniform" />
                    </Button>

                    <TextBox
                        x:Name="txtGameFolderPath"
                        Grid.Row="3"
                        Grid.Column="0"
                        Style="{StaticResource FormTextBox_Local}"
                        Tag="Game folder (opt.)">
                        <TextBox.ToolTip>
                            <ToolTip
                                Background="#333333"
                                BorderThickness="1"
                                Foreground="White">
                                <TextBlock TextWrapping="Wrap">
                                    If specified, GameTimeX will automatically get the exe and switch between profiles (enable in settings).
                                </TextBlock>
                            </ToolTip>
                        </TextBox.ToolTip>
                    </TextBox>

                    <Button
                        x:Name="btnShowFileDialogExe"
                        Grid.Row="3"
                        Grid.Column="2"
                        Click="btnShowFileDialogExe_Click"
                        Style="{StaticResource IconOnlyButton}"
                        ToolTip="Choose folder">
                        <Image
                            Width="18"
                            Height="18"
                            Source="{StaticResource folder}"
                            Stretch="Uniform" />
                    </Button>

                    <GroupBox
                        x:Name="gbProfileSettings"
                        Grid.Row="4"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Margin="0,12,0,0"
                        Header="Profile settings"
                        Style="{StaticResource CardGroupBox}">
                        <StackPanel>
                            <CheckBox
                                x:Name="cbEnableHdr"
                                Margin="0,0,0,10"
                                Content="Enable HDR before launching game"
                                Style="{StaticResource CheckBoxDefaultStyle}"
                                ToolTipService.ShowDuration="20000">
                                <CheckBox.ToolTip>
                                    <ToolTip
                                        Background="#333333"
                                        BorderThickness="1"
                                        Foreground="White">
                                        <TextBlock Width="320" TextWrapping="Wrap">
                                            When enabled, GameTimeX will attempt to enable Windows HDR before launching the game and, if desired, disable it once the game has closed.
                                        </TextBlock>
                                    </ToolTip>
                                </CheckBox.ToolTip>
                            </CheckBox>

                            <TextBox
                                x:Name="txtSteamParams"
                                Margin="0,0,0,0"
                                Style="{StaticResource FormTextBox_Local}"
                                Tag="Steam launch parameters"
                                ToolTipService.ShowDuration="20000">
                                <TextBox.ToolTip>
                                    <ToolTip
                                        Background="#333333"
                                        BorderThickness="1"
                                        Foreground="White">
                                        <TextBlock Width="320" TextWrapping="Wrap">
                                            Optional Steam launch parameters (e.g. -fullscreen, -novid).
                                        </TextBlock>
                                    </ToolTip>
                                </TextBox.ToolTip>
                            </TextBox>
                        </StackPanel>
                    </GroupBox>

                    <Button
                        x:Name="btnSave"
                        Grid.Row="6"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Margin="0,8,0,2"
                        HorizontalAlignment="Stretch"
                        Click="btnSave_Click"
                        Content="Save"
                        Style="{StaticResource NormalGuiButton}" />
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
