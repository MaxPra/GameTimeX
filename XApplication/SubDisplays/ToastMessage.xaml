<Window
    x:Class="GameTimeX.ToastMessage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Info"
    Width="370"
    Height="150"
    AllowsTransparency="True"
    Background="Transparent"
    Focusable="False"
    IsHitTestVisible="False"
    Loaded="Window_Loaded"
    MouseLeftButtonDown="Window_MouseLeftButtonDown"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    Style="{StaticResource DefaultWindowStyle}"
    Topmost="True"
    WindowStartupLocation="Manual"
    WindowStyle="None"
    mc:Ignorable="d">

    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="0"
            CornerRadius="0"
            GlassFrameThickness="0" />
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!--  App-Look (frei nutzbar): Segoe UI Variable  -->
        <FontFamily x:Key="AppFontFamily">Segoe UI Variable Text, Segoe UI</FontFamily>

        <Color x:Key="AccentBlue">#289AFC</Color>
        <SolidColorBrush x:Key="AccentBlueBrush" Color="{StaticResource AccentBlue}" />

        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#F2FFFFFF" />
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#C8FFFFFF" />

        <SolidColorBrush x:Key="WindowStrokeBrush" Color="#22FFFFFF" />
        <SolidColorBrush x:Key="PanelStrokeBrush" Color="#1EFFFFFF" />

        <LinearGradientBrush x:Key="ToastBaseGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Offset="0" Color="#FF0B0D10" />
            <GradientStop Offset="0.55" Color="#FF0A0C10" />
            <GradientStop Offset="1" Color="#FF090A0E" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="ToastColorWashGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Offset="0" Color="#2218232B" />
            <GradientStop Offset="0.55" Color="#1A2B2A36" />
            <GradientStop Offset="1" Color="#26211B18" />
        </LinearGradientBrush>

        <RadialGradientBrush x:Key="ToastSoftHighlightBrush" Center="0.86,0.32" GradientOrigin="0.86,0.32" RadiusX="0.85" RadiusY="0.85">
            <GradientStop Offset="0" Color="#14289AFC" />
            <GradientStop Offset="0.35" Color="#0B289AFC" />
            <GradientStop Offset="1" Color="#00000000" />
        </RadialGradientBrush>

        <RadialGradientBrush x:Key="ToastVignetteBrush" Center="0.52,0.50" GradientOrigin="0.52,0.50" RadiusX="0.95" RadiusY="0.95">
            <GradientStop Offset="0" Color="#00000000" />
            <GradientStop Offset="0.60" Color="#00000000" />
            <GradientStop Offset="1" Color="#C8000000" />
        </RadialGradientBrush>

        <DrawingBrush
            x:Key="SoftNoiseBrush"
            Opacity="0.045"
            TileMode="Tile"
            Viewport="0,0,160,160"
            ViewportUnits="Absolute">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="#FFFFFFFF">
                        <GeometryDrawing.Geometry>
                            <GeometryGroup>
                                <RectangleGeometry Rect="12,18,1,1" />
                                <RectangleGeometry Rect="28,62,1,1" />
                                <RectangleGeometry Rect="64,20,1,1" />
                                <RectangleGeometry Rect="88,78,1,1" />
                                <RectangleGeometry Rect="104,44,1,1" />
                                <RectangleGeometry Rect="140,28,1,1" />
                                <RectangleGeometry Rect="18,132,1,1" />
                                <RectangleGeometry Rect="46,112,1,1" />
                                <RectangleGeometry Rect="118,120,1,1" />
                                <RectangleGeometry Rect="150,96,1,1" />
                            </GeometryGroup>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

        <DrawingBrush x:Key="ToastBackgroundBrush" Stretch="Fill">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="{StaticResource ToastBaseGradient}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="{StaticResource ToastColorWashGradient}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="{StaticResource ToastSoftHighlightBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="{StaticResource SoftNoiseBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="{StaticResource ToastVignetteBrush}">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,1,1" />
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

        <!--  3s-Progress-Animation (ScaleX 1 -> 0)  -->
        <Storyboard x:Key="sbProgress3s">
            <DoubleAnimation
                FillBehavior="HoldEnd"
                Storyboard.TargetName="ProgressScale"
                Storyboard.TargetProperty="ScaleX"
                From="1"
                To="0"
                Duration="0:0:3" />
        </Storyboard>
    </Window.Resources>

    <!--  weicher Fensterschatten (kein schwarzer Rand um die Rundung)  -->
    <Window.Effect>
        <DropShadowEffect
            BlurRadius="26"
            Opacity="0.55"
            ShadowDepth="0"
            Color="#AA000000" />
    </Window.Effect>

    <Grid
        SnapsToDevicePixels="True"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        UseLayoutRounding="True">

        <!--  Hauptkarte  -->
        <Border
            Background="{StaticResource ToastBackgroundBrush}"
            BorderBrush="{StaticResource WindowStrokeBrush}"
            BorderThickness="1"
            ClipToBounds="True"
            CornerRadius="12"
            SnapsToDevicePixels="True">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="6" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  linke Accent-Leiste  -->
                <Border
                    Grid.Column="0"
                    Background="{StaticResource AccentBlueBrush}"
                    CornerRadius="12,0,0,12" />

                <!--  Content  -->
                <Grid Grid.Column="1" Margin="12,10,12,10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="8" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!--  Header  -->
                    <Grid Grid.Row="0" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="10" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border
                            Grid.Column="0"
                            Width="28"
                            Height="28"
                            VerticalAlignment="Center"
                            Background="#16000000"
                            BorderBrush="#18FFFFFF"
                            BorderThickness="1"
                            CornerRadius="8"
                            SnapsToDevicePixels="True">
                            <TextBlock
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="18"
                                Foreground="{StaticResource AccentBlueBrush}"
                                Text="" />
                        </Border>

                        <TextBlock
                            x:Name="Title"
                            Grid.Column="2"
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource AppFontFamily}"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Foreground="{StaticResource TextPrimaryBrush}"
                            Text="Info"
                            TextTrimming="CharacterEllipsis"
                            TextWrapping="NoWrap" />
                    </Grid>

                    <!--  dünne Trennlinie  -->
                    <Border
                        Grid.Row="1"
                        Height="1"
                        Background="#14FFFFFF"
                        CornerRadius="1" />

                    <!--  Message  -->
                    <TextBlock
                        x:Name="Message"
                        Grid.Row="2"
                        MaxHeight="76"
                        Margin="2,0,2,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontFamily="{StaticResource AppFontFamily}"
                        FontSize="16.5"
                        Foreground="{StaticResource TextPrimaryBrush}"
                        Text="Text"
                        TextAlignment="Center"
                        TextTrimming="CharacterEllipsis"
                        TextWrapping="Wrap" />

                    <!--  Progress  -->
                    <Grid Grid.Row="4" Margin="6,0,6,0">
                        <Border
                            Height="4"
                            Background="#14000000"
                            BorderBrush="#14FFFFFF"
                            BorderThickness="1"
                            CornerRadius="3" />
                        <Border
                            Height="4"
                            HorizontalAlignment="Stretch"
                            Background="{StaticResource AccentBlueBrush}"
                            CornerRadius="3"
                            RenderTransformOrigin="0,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform x:Name="ProgressScale" ScaleX="1" ScaleY="1" />
                            </Border.RenderTransform>
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
        </Border>
    </Grid>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource sbProgress3s}" />
        </EventTrigger>
    </Window.Triggers>
</Window>
