<Window
    x:Class="GameTimeX.CreateNew"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="Create New Profile"
    Width="560"
    Height="300"
    AllowsTransparency="True"
    Background="Transparent"
    Loaded="Window_Loaded"
    MouseLeftButtonDown="Window_MouseLeftButtonDown"
    PreviewKeyDown="Window_PreviewKeyDown"
    Style="{StaticResource DefaultWindowStyle}"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None"
    mc:Ignorable="d">

    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="0"
            CornerRadius="0"
            GlassFrameThickness="0" />
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <sys:Double x:Key="FormControlHeight">32</sys:Double>
        <Thickness x:Key="FormRowSpacing">0,3,0,3</Thickness>

        <Style
            x:Key="IconOnlyButton"
            BasedOn="{StaticResource NormalGuiButton}"
            TargetType="Button">
            <Setter Property="Width" Value="56" />
            <Setter Property="Height" Value="{StaticResource FormControlHeight}" />
            <Setter Property="Margin" Value="{StaticResource FormRowSpacing}" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style
            x:Key="FormTextBox_Local"
            BasedOn="{StaticResource FormTextBox}"
            TargetType="TextBox">
            <Setter Property="Height" Value="{StaticResource FormControlHeight}" />
            <Setter Property="Margin" Value="{StaticResource FormRowSpacing}" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
    </Window.Resources>

    <Border
        Background="#2F2F2F"
        BorderBrush="{DynamicResource ButtonDefaultBrush}"
        BorderThickness="1"
        CornerRadius="12"
        SnapsToDevicePixels="True">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="28" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Titlebar  -->
            <Border
                Grid.Row="0"
                Background="Black"
                ClipToBounds="True"
                CornerRadius="12,12,0,0" />
            <TextBlock
                Grid.Row="0"
                Margin="10,0,0,0"
                VerticalAlignment="Center"
                Foreground="White"
                Text="Create new profile" />

            <StackPanel
                Grid.Row="0"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <Button
                    x:Name="btnClose"
                    Width="40"
                    Height="28"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    Click="btnClose_Click"
                    Content="X"
                    Foreground="White"
                    Style="{StaticResource NoMouseOverButtonStyle}">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border
                                x:Name="bg"
                                Background="{TemplateBinding Background}"
                                CornerRadius="0,12,0,0">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="bg" Property="Background" Value="Red" />
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="bg" Property="Background" Value="#CC0000" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>

            <!--  Inhalt  -->
            <Grid Grid.Row="1" Margin="18">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="12" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!--  Reihen: Status | Name | Pic path | Game folder | Füller | Save  -->
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <!--  0 Status  -->
                    <RowDefinition Height="Auto" />
                    <!--  1 Name  -->
                    <RowDefinition Height="Auto" />
                    <!--  2 Pic path  -->
                    <RowDefinition Height="Auto" />
                    <!--  3 Game folder  -->
                    <RowDefinition Height="*" />
                    <!--  4 Füller  -->
                    <RowDefinition Height="Auto" />
                    <!--  5 Save  -->
                </Grid.RowDefinitions>

                <!--  Steam profile linked bar  -->
                <Border
                    x:Name="bSteamProfileLinked"
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Margin="0,0,0,8"
                    Padding="6,2"
                    Background="#3A3A3A"
                    CornerRadius="6">
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,6,0"
                            FontWeight="Bold"
                            Foreground="{DynamicResource ButtonDefaultBrush}"
                            Text="✔" />
                        <TextBlock
                            VerticalAlignment="Center"
                            Foreground="White"
                            Text="Steam profile linked" />
                    </StackPanel>
                </Border>

                <!--  Profile name  -->
                <TextBox
                    x:Name="txtProfileName"
                    Grid.Row="1"
                    Grid.Column="0"
                    Style="{StaticResource FormTextBox_Local}"
                    Tag="Profile name" />

                <!--  Picture path  -->
                <TextBox
                    x:Name="txtPicPath"
                    Grid.Row="2"
                    Grid.Column="0"
                    IsReadOnly="True"
                    Style="{StaticResource FormTextBox_Local}"
                    Tag="Picture path" />

                <!--  Steam Import button  -->
                <Button
                    x:Name="btnImportFromSteam"
                    Grid.Row="1"
                    Grid.Column="2"
                    Click="btnImportFromSteam_Click"
                    Style="{StaticResource IconOnlyButton}"
                    ToolTip="Import game from steam">
                    <Image
                        Width="30"
                        Height="30"
                        Source="{StaticResource steamImportImage}"
                        Stretch="Uniform" />
                </Button>

                <!--  Picture icon button  -->
                <Button
                    x:Name="btnShowFileDialog"
                    Grid.Row="2"
                    Grid.Column="2"
                    Click="btnShowFileDialog_Click"
                    Style="{StaticResource IconOnlyButton}"
                    ToolTip="Choose pic">
                    <Image
                        Width="18"
                        Height="18"
                        Source="{StaticResource picture}"
                        Stretch="Uniform" />
                </Button>

                <!--  Game folder  -->
                <TextBox
                    x:Name="txtGameFolderPath"
                    Grid.Row="3"
                    Grid.Column="0"
                    Style="{StaticResource FormTextBox_Local}"
                    Tag="Game folder (opt.)">
                    <TextBox.ToolTip>
                        <ToolTip
                            Background="#333333"
                            BorderThickness="1"
                            Foreground="White">
                            <TextBlock TextWrapping="Wrap">
                                If specified, GameTimeX will automatically get the exe and switch between profiles (enable in settings).
                            </TextBlock>
                        </ToolTip>
                    </TextBox.ToolTip>
                </TextBox>

                <!--  Folder icon button  -->
                <Button
                    x:Name="btnShowFileDialogExe"
                    Grid.Row="3"
                    Grid.Column="2"
                    Click="btnShowFileDialogExe_Click"
                    Style="{StaticResource IconOnlyButton}"
                    ToolTip="Choose folder">
                    <Image
                        Width="18"
                        Height="18"
                        Source="{StaticResource folder}"
                        Stretch="Uniform" />
                </Button>

                <!--  Save  -->
                <Button
                    x:Name="btnCreateNewProfile"
                    Grid.Row="5"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Margin="0,8,0,2"
                    HorizontalAlignment="Stretch"
                    Click="btnCreateNewProfile_Click"
                    Content="Save"
                    Style="{StaticResource NormalGuiButton}" />
            </Grid>
        </Grid>
    </Border>
</Window>
